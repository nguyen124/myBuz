<div *ngFor="let comment of comments; let i = index">
  <div *ngIf="!comment.parentCommentId" class="pb-2 d-flex">
    <div class="w-100">
      <app-comment [comment]="comment" [item]="item" (commentBoxFocused)="handleCommentBoxFocus()">
        <i class="btn btn-xs fa fa-reply mr-1 text-success font-size-115-rem" (click)="showCommentBox(i)"></i>
        <button type="button" class="btn-xs btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">
        </button>
        <div class="dropdown-menu">
          <a href="javascript:void(0)" (click)="editComment(i, comment._id)" class="ml-1 d-block"
            *ngIf="authSvc.user && authSvc.user.username == comment.writtenBy.username">Edit</a>
          <a href="javascript:void(0)" (click)="deleteComment(i, comment)" class="ml-1 d-block"
            *ngIf="authSvc.user && authSvc.user.username == comment.writtenBy.username">Delete</a>
          <app-report [comment]="comment"></app-report>
        </div>
        <div *ngIf="comment.showCommentBox" class="row">
          <div class="col-md-12 ml-1 mt-1">
            <app-comment-box [item]="item" [comment]="comment">
              <app-comment-replyto [personName]="comment.writtenBy.username"></app-comment-replyto>
            </app-comment-box>
          </div>
        </div>
      </app-comment>
    </div>
  </div>
</div>

<div *ngIf="comments && comments.length >0" class="row mt-2 mb-2">
  <a href="javascript:void(0)" (click)="getMoreComments()" class="btn-xs btn-primary d-inline" role="button">More
    comments <i class="fa fa-angle-double-right"></i> </a>
</div>